import{c as f,r as n,j as e,P as R,T as ne,n as b}from"./index-DDXeGDIl.js";import{T as ie}from"./target-DKRKPjWq.js";/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const re=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],de=f("chevron-right",re);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ce=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],xe=f("circle-check",ce);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const he=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],ge=f("circle",he);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ue=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]],G=f("ellipsis",ue);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pe=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],me=f("pencil",pe);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const be=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],fe=f("settings",be),w=()=>typeof window<"u"?window.electronAPI:void 0,we=async()=>{const a=w();if(a!=null&&a.getMethodologies)return a.getMethodologies();throw new Error("Electron API unavailable: methodologies require SQLite backend.")},ke=async a=>{const s=w();if(s!=null&&s.createMethodology)return s.createMethodology({id:`m-${Date.now()}`,name:a});throw new Error("Electron API unavailable: methodologies require SQLite backend.")},ye=async(a,s,o="todo")=>{const r=w();if(r!=null&&r.createMethodologyTask)return r.createMethodologyTask({id:`t-${Date.now()}`,methodologyId:a,title:s,status:o});throw new Error("Electron API unavailable: methodologies require SQLite backend.")},W=async(a,s)=>{const o=w();if(o!=null&&o.updateMethodologyTask){await o.updateMethodologyTask({id:a,...s});return}throw new Error("Electron API unavailable: methodologies require SQLite backend.")},je=async(a,s)=>{const o=w();if(o!=null&&o.updateMethodology){await o.updateMethodology({id:a,name:s});return}throw new Error("Electron API unavailable: methodologies require SQLite backend.")},ve=async a=>{const s=w();if(s!=null&&s.deleteMethodology){await s.deleteMethodology(a);return}throw new Error("Electron API unavailable: methodologies require SQLite backend.")},Pe=()=>{var B;const[a,s]=n.useState([]),[o,r]=n.useState(""),[g,x]=n.useState(!0),[h,i]=n.useState(null),[u,k]=n.useState(!1),[z,y]=n.useState(""),[H,j]=n.useState(!1),[I,v]=n.useState(""),[D,A]=n.useState("todo"),[L,J]=n.useState(""),[U,N]=n.useState(null),[K,M]=n.useState(null),[C,S]=n.useState(null),[$,_]=n.useState(""),[F,O]=n.useState("todo"),[V,T]=n.useState(!1),[q,E]=n.useState(""),[Q,P]=n.useState(""),p=async()=>{x(!0),i(null);try{const t=await we();s(t),r(c=>{var m;return c&&t.some(d=>d.id===c)?c:((m=t[0])==null?void 0:m.id)||""})}catch(t){console.error("Failed to load methodologies",t),s([]),r(""),i("SQLite backend unavailable. Please launch the Electron app."),b("Failed to load methodologies.")}finally{x(!1)}};n.useEffect(()=>{p()},[]);const l=n.useMemo(()=>a.find(t=>t.id===o)||a[0],[o,a]),X=async()=>{const t=z.trim();if(t)try{i(null),await ke(t),await p(),y(""),k(!1)}catch(c){console.error("Failed to create methodology",c),i("Unable to create methodology. Please launch the Electron app."),b("Unable to create methodology.")}},Y=async()=>{const t=I.trim();if(!(!t||!L))try{i(null),await ye(L,t,D),await p(),v(""),j(!1)}catch(c){console.error("Failed to create task",c),i("Unable to create task. Please launch the Electron app."),b("Unable to create task.")}},Z=async t=>{if(U)try{await W(U,{status:t}),await p()}catch(c){console.error("Failed to update task status",c),i("Unable to move task. Please launch the Electron app."),b("Unable to move task.")}finally{N(null),M(null)}},ee=t=>{S(t),_(t.title),O(t.status)},te=t=>{P(t.id),E(t.name),T(!0)},se=async()=>{if(C)try{i(null),await W(C.id,{title:$.trim(),status:F}),await p(),S(null)}catch(t){console.error("Failed to update task",t),i("Unable to update task. Please launch the Electron app."),b("Unable to update task.")}},ae=async()=>{const t=q.trim();if(!(!Q||!t))try{i(null),await je(Q,t),await p(),T(!1),P(""),E("")}catch(c){console.error("Failed to update methodology",c),i("Unable to update methodology. Please launch the Electron app."),b("Unable to update methodology.")}},oe=async t=>{if(window.confirm(`Delete "${t.name}" and all its tasks?`))try{i(null),await ve(t.id),await p()}catch(m){console.error("Failed to delete methodology",m),i("Unable to delete methodology. Please launch the Electron app."),b("Unable to delete methodology.")}};return e.jsxs("div",{className:"space-y-6 animate-in fade-in slide-in-from-bottom-4 duration-700",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-bold text-slate-800 tracking-tight",children:"Methodologies"}),e.jsx("p",{className:"text-slate-500 mt-1",children:"Guided testing workflows for consistent results."})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{className:"bg-white border border-slate-200 text-slate-600 px-4 py-2 rounded-xl text-sm font-semibold hover:bg-slate-50 transition-colors flex items-center gap-2",children:"Import Template"}),e.jsxs("button",{onClick:()=>k(!0),className:"bg-indigo-600 hover:bg-indigo-700 text-white px-5 py-2.5 rounded-xl font-semibold text-sm transition-all shadow-lg shadow-indigo-100 flex items-center gap-2",children:[e.jsx(R,{size:18}),"New Methodology"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-8",children:[e.jsx("div",{className:"lg:col-span-1 space-y-3",children:g?e.jsx("div",{className:"bg-white border border-slate-200 rounded-2xl p-6 text-xs font-semibold text-slate-400",children:"Loading methodologies..."}):h?e.jsx("div",{className:"bg-rose-50 border border-rose-200 rounded-2xl p-6 text-xs font-semibold text-rose-400",children:h}):a.length===0?e.jsx("div",{className:"bg-white border border-dashed border-slate-200 rounded-2xl p-6 text-xs font-semibold text-slate-400",children:"No methodologies yet. Create one to get started."}):a.map(t=>e.jsxs("button",{onClick:()=>r(t.id),className:`w-full text-left p-4 rounded-2xl border transition-all flex items-center justify-between group ${o===t.id?"bg-indigo-600 border-indigo-600 text-white shadow-lg shadow-indigo-100":"bg-white border-slate-200 text-slate-600 hover:border-indigo-300"}`,children:[e.jsxs("div",{className:"flex items-center gap-3 overflow-hidden",children:[e.jsx(ie,{size:18,className:o===t.id?"text-white":"text-slate-400"}),e.jsx("span",{className:"font-bold text-sm truncate",children:t.name})]}),e.jsx(de,{size:16,className:`transition-transform ${o===t.id?"translate-x-1":"group-hover:translate-x-1 opacity-50"}`})]},t.id))}),e.jsx("div",{className:"lg:col-span-3",children:e.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 shadow-sm overflow-hidden",children:[e.jsxs("div",{className:"p-6 border-b border-slate-100 flex items-center justify-between bg-slate-50/50",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-slate-800 text-lg",children:(l==null?void 0:l.name)||"Methodology"}),e.jsxs("p",{className:"text-xs text-slate-400 font-semibold uppercase tracking-widest mt-1",children:["Progress: ",(B=l==null?void 0:l.tasks)!=null&&B.length?Math.round(l.tasks.filter(t=>t.status==="done").length/l.tasks.length*100):0,"%"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[l&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>te(l),className:"p-2 hover:bg-slate-200 rounded-lg text-slate-500 transition-colors",title:"Edit methodology",children:e.jsx(me,{size:16})}),e.jsx("button",{onClick:()=>oe(l),className:"p-2 hover:bg-rose-50 rounded-lg text-rose-500 transition-colors",title:"Delete methodology",children:e.jsx(ne,{size:16})})]}),e.jsx("button",{className:"p-2 hover:bg-slate-200 rounded-lg text-slate-500 transition-colors",children:e.jsx(fe,{size:18})}),e.jsx("button",{className:"p-2 hover:bg-slate-200 rounded-lg text-slate-500 transition-colors",children:e.jsx(G,{size:18})})]})]}),e.jsx("div",{className:"p-4 bg-slate-50/30",children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:["todo","in-progress","done"].map(t=>{var c,m;return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between px-2",children:[e.jsx("h4",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:t==="todo"?"Backlog":t==="in-progress"?"In Progress":"Completed"}),e.jsx("span",{className:"text-[10px] font-bold text-slate-400 bg-slate-100 px-2 py-0.5 rounded-full",children:((c=l==null?void 0:l.tasks)==null?void 0:c.filter(d=>d.status===t).length)||0})]}),e.jsxs("div",{className:`space-y-3 min-h-[300px] p-2 rounded-2xl transition-all ${K===t?"bg-indigo-50/60 border border-dashed border-indigo-200":""}`,onDragOver:d=>{d.preventDefault(),M(t)},onDragLeave:()=>M(null),onDrop:d=>{d.preventDefault(),Z(t)},children:[(m=l==null?void 0:l.tasks)==null?void 0:m.filter(d=>d.status===t).map(d=>e.jsxs("div",{draggable:!0,onDragStart:()=>N(d.id),onDragEnd:()=>N(null),className:"bg-white p-4 rounded-xl border border-slate-200 shadow-sm hover:border-indigo-300 transition-all group cursor-grab active:cursor-grabbing",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("button",{className:`mt-0.5 transition-colors ${d.status==="done"?"text-emerald-500":"text-slate-300 hover:text-indigo-400"}`,children:d.status==="done"?e.jsx(xe,{size:18}):e.jsx(ge,{size:18})}),e.jsx("span",{className:`text-sm font-semibold leading-snug ${d.status==="done"?"text-slate-400 line-through":"text-slate-700"}`,children:d.title})]}),e.jsx("div",{className:"mt-4 flex items-center justify-end",children:e.jsx("button",{onClick:le=>{le.stopPropagation(),ee(d)},className:"opacity-0 group-hover:opacity-100 p-1 hover:bg-slate-100 rounded transition-all text-slate-400",title:"Edit task",children:e.jsx(G,{size:14})})})]},d.id)),e.jsxs("button",{onClick:()=>{l!=null&&l.id&&(J(l.id),A(t),j(!0))},className:"w-full py-3 rounded-xl border border-dashed border-slate-300 text-slate-400 hover:text-indigo-500 hover:border-indigo-300 transition-all text-xs font-bold flex items-center justify-center gap-2",children:[e.jsx(R,{size:14}),"Add Task"]})]})]},t)})})})]})})]}),e.jsx(Ne,{isOpen:u,value:z,onChange:y,onClose:()=>{k(!1),y("")},onSubmit:X,error:h}),e.jsx(Me,{isOpen:H,name:I,status:D,onNameChange:v,onStatusChange:A,onClose:()=>{j(!1),v("")},onSubmit:Y,error:h}),e.jsx(Ce,{isOpen:!!C,name:$,status:F,onNameChange:_,onStatusChange:O,onClose:()=>S(null),onSubmit:se,error:h}),e.jsx(Se,{isOpen:V,name:q,onNameChange:E,onClose:()=>{T(!1),P("")},onSubmit:ae,error:h})]})};function Ne({isOpen:a,value:s,onChange:o,onClose:r,onSubmit:g,error:x}){return a?e.jsxs("div",{className:"fixed inset-0 z-[400] flex items-center justify-center p-6 animate-in fade-in duration-300",children:[e.jsx("div",{className:"absolute inset-0 bg-slate-900/40 backdrop-blur-sm",onClick:r}),e.jsx("div",{className:"relative bg-white w-full max-w-lg rounded-[2.5rem] shadow-2xl border border-slate-200 overflow-hidden",children:e.jsxs("div",{className:"p-10 space-y-8",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-black text-slate-800 tracking-tight",children:"Create Methodology"}),e.jsx("p",{className:"text-[10px] text-slate-400 font-bold uppercase tracking-widest mt-1",children:"Ducky Pwn Docs Protocol"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-[10px] font-black text-indigo-600 uppercase tracking-widest px-1",children:"Methodology Name"}),e.jsx("input",{type:"text",value:s,onChange:h=>o(h.target.value),placeholder:"e.g. OWASP Top 10",className:"w-full bg-slate-50 border border-slate-100 rounded-2xl px-5 py-4 text-sm font-bold outline-none focus:ring-4 focus:ring-indigo-500/10 focus:bg-white transition-all shadow-sm"})]}),e.jsxs("div",{className:"flex gap-4 pt-2",children:[e.jsx("button",{onClick:r,className:"flex-1 py-4 bg-slate-50 hover:bg-slate-100 text-slate-500 rounded-2xl font-black text-[10px] uppercase tracking-widest transition-all",children:"Cancel"}),e.jsx("button",{onClick:g,disabled:!s.trim(),className:"flex-[2] py-4 bg-indigo-600 hover:bg-indigo-700 text-white rounded-2xl font-black text-[10px] uppercase tracking-widest shadow-xl shadow-indigo-100 transition-all active:scale-95 disabled:opacity-50",children:"Create Methodology"})]}),x&&e.jsx("p",{className:"text-[10px] font-black uppercase tracking-widest text-rose-500",children:x})]})})]}):null}function Me({isOpen:a,name:s,status:o,onNameChange:r,onStatusChange:g,onClose:x,onSubmit:h,error:i}){return a?e.jsxs("div",{className:"fixed inset-0 z-[400] flex items-center justify-center p-6 animate-in fade-in duration-300",children:[e.jsx("div",{className:"absolute inset-0 bg-slate-900/40 backdrop-blur-sm",onClick:x}),e.jsx("div",{className:"relative bg-white w-full max-w-lg rounded-[2.5rem] shadow-2xl border border-slate-200 overflow-hidden",children:e.jsxs("div",{className:"p-10 space-y-8",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-black text-slate-800 tracking-tight",children:"Add Task"}),e.jsx("p",{className:"text-[10px] text-slate-400 font-bold uppercase tracking-widest mt-1",children:"Methodology Task"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-[10px] font-black text-indigo-600 uppercase tracking-widest px-1",children:"Task Name"}),e.jsx("input",{type:"text",value:s,onChange:u=>r(u.target.value),placeholder:"e.g. A01: Broken Access Control",className:"w-full bg-slate-50 border border-slate-100 rounded-2xl px-5 py-4 text-sm font-bold outline-none focus:ring-4 focus:ring-indigo-500/10 focus:bg-white transition-all shadow-sm"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1",children:"Status"}),e.jsxs("select",{value:o,onChange:u=>g(u.target.value),className:"w-full bg-slate-50 border border-slate-100 rounded-2xl px-5 py-4 text-sm font-bold text-slate-900 outline-none",children:[e.jsx("option",{value:"todo",children:"Backlog"}),e.jsx("option",{value:"in-progress",children:"In Progress"}),e.jsx("option",{value:"done",children:"Completed"})]})]}),e.jsxs("div",{className:"flex gap-4 pt-2",children:[e.jsx("button",{onClick:x,className:"flex-1 py-4 bg-slate-50 hover:bg-slate-100 text-slate-500 rounded-2xl font-black text-[10px] uppercase tracking-widest transition-all",children:"Cancel"}),e.jsx("button",{onClick:h,disabled:!s.trim(),className:"flex-[2] py-4 bg-indigo-600 hover:bg-indigo-700 text-white rounded-2xl font-black text-[10px] uppercase tracking-widest shadow-xl shadow-indigo-100 transition-all active:scale-95 disabled:opacity-50",children:"Add Task"})]}),i&&e.jsx("p",{className:"text-[10px] font-black uppercase tracking-widest text-rose-500",children:i})]})})]}):null}function Ce({isOpen:a,name:s,status:o,onNameChange:r,onStatusChange:g,onClose:x,onSubmit:h,error:i}){return a?e.jsxs("div",{className:"fixed inset-0 z-[400] flex items-center justify-center p-6 animate-in fade-in duration-300",children:[e.jsx("div",{className:"absolute inset-0 bg-slate-900/40 backdrop-blur-sm",onClick:x}),e.jsx("div",{className:"relative bg-white w-full max-w-lg rounded-[2.5rem] shadow-2xl border border-slate-200 overflow-hidden",children:e.jsxs("div",{className:"p-10 space-y-8",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-black text-slate-800 tracking-tight",children:"Edit Task"}),e.jsx("p",{className:"text-[10px] text-slate-400 font-bold uppercase tracking-widest mt-1",children:"Update title or status"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-[10px] font-black text-indigo-600 uppercase tracking-widest px-1",children:"Task Name"}),e.jsx("input",{type:"text",value:s,onChange:u=>r(u.target.value),className:"w-full bg-slate-50 border border-slate-100 rounded-2xl px-5 py-4 text-sm font-bold outline-none focus:ring-4 focus:ring-indigo-500/10 focus:bg-white transition-all shadow-sm"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1",children:"Status"}),e.jsxs("select",{value:o,onChange:u=>g(u.target.value),className:"w-full bg-slate-50 border border-slate-100 rounded-2xl px-5 py-4 text-sm font-bold text-slate-900 outline-none",children:[e.jsx("option",{value:"todo",children:"Backlog"}),e.jsx("option",{value:"in-progress",children:"In Progress"}),e.jsx("option",{value:"done",children:"Completed"})]})]}),e.jsxs("div",{className:"flex gap-4 pt-2",children:[e.jsx("button",{onClick:x,className:"flex-1 py-4 bg-slate-50 hover:bg-slate-100 text-slate-500 rounded-2xl font-black text-[10px] uppercase tracking-widest transition-all",children:"Cancel"}),e.jsx("button",{onClick:h,disabled:!s.trim(),className:"flex-[2] py-4 bg-indigo-600 hover:bg-indigo-700 text-white rounded-2xl font-black text-[10px] uppercase tracking-widest shadow-xl shadow-indigo-100 transition-all active:scale-95 disabled:opacity-50",children:"Save Changes"})]}),i&&e.jsx("p",{className:"text-[10px] font-black uppercase tracking-widest text-rose-500",children:i})]})})]}):null}function Se({isOpen:a,name:s,onNameChange:o,onClose:r,onSubmit:g,error:x}){return a?e.jsxs("div",{className:"fixed inset-0 z-[400] flex items-center justify-center p-6 animate-in fade-in duration-300",children:[e.jsx("div",{className:"absolute inset-0 bg-slate-900/40 backdrop-blur-sm",onClick:r}),e.jsx("div",{className:"relative bg-white w-full max-w-lg rounded-[2.5rem] shadow-2xl border border-slate-200 overflow-hidden",children:e.jsxs("div",{className:"p-10 space-y-8",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-black text-slate-800 tracking-tight",children:"Edit Methodology"}),e.jsx("p",{className:"text-[10px] text-slate-400 font-bold uppercase tracking-widest mt-1",children:"Rename your workflow"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-[10px] font-black text-indigo-600 uppercase tracking-widest px-1",children:"Methodology Name"}),e.jsx("input",{type:"text",value:s,onChange:h=>o(h.target.value),className:"w-full bg-slate-50 border border-slate-100 rounded-2xl px-5 py-4 text-sm font-bold outline-none focus:ring-4 focus:ring-indigo-500/10 focus:bg-white transition-all shadow-sm"})]}),e.jsxs("div",{className:"flex gap-4 pt-2",children:[e.jsx("button",{onClick:r,className:"flex-1 py-4 bg-slate-50 hover:bg-slate-100 text-slate-500 rounded-2xl font-black text-[10px] uppercase tracking-widest transition-all",children:"Cancel"}),e.jsx("button",{onClick:g,disabled:!s.trim(),className:"flex-[2] py-4 bg-indigo-600 hover:bg-indigo-700 text-white rounded-2xl font-black text-[10px] uppercase tracking-widest shadow-xl shadow-indigo-100 transition-all active:scale-95 disabled:opacity-50",children:"Save Changes"})]}),x&&e.jsx("p",{className:"text-[10px] font-black uppercase tracking-widest text-rose-500",children:x})]})})]}):null}export{Pe as default};
